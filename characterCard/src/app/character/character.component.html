<div class="container py-5 mt-3">
    <div class="row">
        <div class="col d-flex mr-auto">

            <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                <button type="button" class="btn btn-primary" (click)="justSave()">
                    Save
                </button>
                <div class="btn-group mr-2" role="group">
                    <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    </button>
                    <div class="dropdown-menu bg-primary" style="width:50px;" aria-labelledby="btnGroupDrop1">
                        <div class="row" style="margin:0 15px;">
                            <a href="/" class="d-block w-100 text-white" data-toggle="modal"
                                data-target="#saveChCard">Save New</a>
                            <a id="saveJson" class="d-block w-100 text-white" (click)="downloadJson()">Out Put</a>
                        </div>
                    </div>
                </div>
            </div>

            <button type="button" class="btn btn-primary mr-3" data-toggle="modal" data-target="#loadChCard">
                Load
            </button>
            <div class="d-flex justify-content-center align-items-center">
                角色卡名稱：<div class="h5 mr-3 mb-0">{{CHcard}}</div>
            </div>
        </div>

        <div class="col-2">
            <mutildice class="d-flex justify-content-end"></mutildice>
        </div>

    </div>

    <div class="text-center my-5">
        <img src="../../assets/coc-font.svg" alt="">
    </div>
    <div class="row mt-2">
        <div class="col">
            <div class="row">
                <div class="col-3">
                    <profile #myProfile [CHcard]="CHcard"></profile>
                </div>
                <div class="col-9">
                    <characteristics #myCharacteristics [CHcard]="CHcard"></characteristics>
                </div>
            </div>
        </div>
    </div>

    <skill-list #mySkillList [CHcard]="CHcard"></skill-list>
    <backstory #myBackstory [CHcard]="CHcard"></backstory>

</div>

<!--Load Modal -->
<div class="modal fade" id="loadChCard" tabindex="-1" role="dialog" aria-labelledby="loadChCardLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body mt-2">
                <p class="text-center h5">請選擇角色卡</p>
                <div *ngFor="let c of chCardBox" class=" d-flex justify-content-center  align-items-center">
                    <input type="radio" name="c" value="c" class="mx-1" (click)="chooseCard(c)">{{c}}<br />
                </div>
                <button type="button" class="btn btn-primary d-flex mx-auto mt-3" data-dismiss="modal"
                    aria-label="Close" (click)="checkoutCard()">Load</button>
            </div>
            <div class="modal-body mt-2 border-top">
                <p class="text-center mb-1 h5">讀取現成檔案</p>
                <p class="text-center my-0 text-danger"><small>※請勿上傳非本網頁輸出的txt檔案，以免造成資料錯誤</small></p>
                <p class="text-center my-0 text-danger"><small>※如果已有同名檔案，將會覆蓋原檔案！</small></p>
                <!-- <p class="text-center"><small>※請以筆記本打開json檔，複製所有文字貼上</small></p> -->
                <div class="d-flex mt-2">
                    <div class="col-3">
                        <label  for="jsonCardName">角色卡名稱</label>
                    </div>
                    <div class="col-9">
                        <input type="text" id="jsonCardName" class="form-control mb-2" [(ngModel)]="jsonCardName">
                    </div>
                </div>
                <div class="custom-file">
                    <input type="file" accept=".txt" class="custom-file-input" id="file-uploader"
                        (change)="jsonUpload($event)">
                    <label class="custom-file-label" for="file-uploader">{{jsonFileName}}</label>
                </div>

                <!-- <p class="mt-3 mb-1">貼上json文字</p>
                <input type="text" class="form-control" name="loadJson" [(ngModel)]="loadJson"> -->

                <button type="submit" class="btn btn-primary d-flex mx-auto mt-3" data-dismiss="modal"
                    aria-label="Close" (click)="loadJsonFile()">Load</button>
            </div>
        </div>
    </div>
</div>

<!--Save Modal -->
<div class="modal fade" id="saveChCard" tabindex="-1" role="dialog" aria-labelledby="saveChCardLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body mt-2">
                <div class="row d-flex justify-content-center">
                    <div class="col-12">
                        <h5 class="text-center">請輸入角色卡名稱</h5>
                    </div>
                    <div class="col-12 d-flex justify-content-center">
                        <input type="text" [(ngModel)]="addNewCHcardData">
                        <button type="button" class="btn btn-primary d-flex ml-2 mt-2" (click)="addNewTrue()"
                            (click)="addNewCHcard()">
                            Save
                        </button>
                    </div>
                    <div>
                        <div class="modal-footer border-0" [hidden]="!addNew">
                            <div class="col-12 mt-3 text-center">
                                <p class="mb-1">確認儲存此角色卡？</p>
                                <p class="text-danger"><small>※如果已有同名檔案，將會覆蓋原檔案！</small></p>
                                <button type="button" class="btn btn-danger mx-1" class="btn btn-danger"
                                    data-dismiss="modal" (click)="saveNewCard()">Save
                                    changes</button>
                                <button type="button" class="btn btn-outline-primary mx-1" data-dismiss="modal"
                                    (click)="addNewFalse()" (click)="DontSave()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>